// CPU1                             CPU2

while (flag == false);              x = 42
// memory barrier                   // memory barrier // HL
print x                             flag = true

